{#/*********************************************************************************
 * This file is part of Myddleware.

 * @package Myddleware
 * @copyright Copyright (C) 2013 - 2015  Stéphane Faure - CRMconsult EURL
 * @copyright Copyright (C) 2015 - 2016  Stéphane Faure - Myddleware ltd - contact@myddleware.com
 * @link http://www.myddleware.com	
 
 This file is part of Myddleware.
 
 Myddleware is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 Myddleware is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with Myddleware.  If not, see <http://www.gnu.org/licenses/>.
*********************************************************************************/ #} 

{% extends "baseone.html.twig" %}
{% block title %}{{ parent() }} | {{ 'login.title'|trans }}{% endblock %}
{% set body_class = 'login' %}

{% block body %}
	<div id="myd_connexion">
		<div class="white">

			<p class="ctr"><span class="logo"></span></p>
				<form id="mydlogin" method="post" class="form-inline" role="form" action="{{ path('login') }}">
				{% if attempt < 6 %}
				<div class="form-group">
				<p>
					<input type="text" autocomplete='off' class="form-control" id="username" name="_username" placeholder="{{ 'login.user'|trans }}">
					<input type="password" autocomplete='off' class="form-control" id="password" name="_password" placeholder="{{ 'login.pwd'|trans }}">
					<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}" >
				</p>
				{% if error %}
					<div class="alert alert-danger" role="alert">
						<span>
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
							<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
							</svg>
							{{ error|trans }} ( {{ attempt }} ) 
						</span>
					</div>
				{% else %}
					<div id="_error" style="display:none;" class="alert alert-danger" role="alert">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
						<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
						</svg> 
						{{ 'login.error_session'|trans }}
					</div>
				{% endif %}
				<button class="btn-myd">{{ 'login.connexion'|trans }}</button>
				<button style="display:none;" id="_submit" name="_submit" class="btn-myd"></button>
				<p><a class="fancybox" data-fancybox-type="iframe" href="{{ path('resetting_request') }}">{{ 'login.btn.pwd_forgot'|trans }}</a></p>
				</div>
				{% else %}
					<div class="alert alert-danger" role="alert">
						<span>
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
							<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
							</svg>
							Please wait :  {{ remaining.minute }}min {{ remaining.second }}s 
						</span>
					</div>
					<p><a class="fancybox" data-fancybox-type="iframe" href="{{ path('resetting_request') }}">{{ 'login.btn.pwd_forgot'|trans }}</a></p>
			{% endif %}
			</form>
		</div>
		<div class="grey">
			<p>Before trying to log in, please ensure you've completed the installation process</p>
			<a href="{{ path('install_requirements')}}">
				<button type="button" class="btn-mydinv">Install Myddleware</button>
			</a>	
			{% if platform_sh == true %}
				<p class="ctr"><span class="logo_platform"></span></p>
			{% else %}
				<p class="ctr"><span class="logo_empty"></span></p>
			{% endif %}
			<p class="ctr">
				{% if password_message == true %}
					<p>{{ 'login.platform.line1'|trans }}</p>
					<p>{{ 'login.platform.line2'|trans }}</p>
					<p class="login_warnig">{{ 'login.platform.line3'|trans }}</p>
				{% endif %}
				<p>{{ 'login.text_up_right'|trans }}</p>
				<a href="http://www.myddleware.com" class="btn-mydinv" target="_blank">{{ 'login.btn.here'|trans }}</a>
			</p>
			{#<p class="ctr">
				<small>{{ 'login.text_bottom_right'|trans }}</small>
			</p>
			<p class="ctr">
				<button type="submit" class="btn-myd">{{ 'login.btn.create'|trans }}</button>
			</p>#}
		</div>

	<div clss="clr"></div>
	</div>
	{# ------------- PARAMETRES JQUERY ------------- #}
	<script type="text/javascript">
		var path_control = "{#{{ path('login_protect') }}#}";
	</script>
	{# ------------- PARAMETRES JQUERY ------------- #}
{% endblock %}